<!DOCTYPE html>
  <html>
    <head>
      <title>springmvc</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="file:///C:\Users\&#x675F;&#x6C38;&#x7965;\.vscode\extensions\shd101wyy.markdown-preview-enhanced-0.3.2\node_modules\@shd101wyy\mume\dependencies\katex\katex.min.css">
      
      
      
      
      
      
      
      
      

      <style> 
      /**
 * prism.js Github theme based on GitHub's theme.
 * @author Sam Clarke
 */
code[class*="language-"],
pre[class*="language-"] {
  color: #333;
  background: none;
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.4;

  -moz-tab-size: 8;
  -o-tab-size: 8;
  tab-size: 8;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
  padding: .8em;
  overflow: auto;
  /* border: 1px solid #ddd; */
  border-radius: 3px;
  /* background: #fff; */
  background: #f5f5f5;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
  padding: .1em;
  border-radius: .3em;
  white-space: normal;
  background: #f5f5f5;
}

.token.comment,
.token.blockquote {
  color: #969896;
}

.token.cdata {
  color: #183691;
}

.token.doctype,
.token.punctuation,
.token.variable,
.token.macro.property {
  color: #333;
}

.token.operator,
.token.important,
.token.keyword,
.token.rule,
.token.builtin {
  color: #a71d5d;
}

.token.string,
.token.url,
.token.regex,
.token.attr-value {
  color: #183691;
}

.token.property,
.token.number,
.token.boolean,
.token.entity,
.token.atrule,
.token.constant,
.token.symbol,
.token.command,
.token.code {
  color: #0086b3;
}

.token.tag,
.token.selector,
.token.prolog {
  color: #63a35c;
}

.token.function,
.token.namespace,
.token.pseudo-element,
.token.class,
.token.class-name,
.token.pseudo-class,
.token.id,
.token.url-reference .token.variable,
.token.attr-name {
  color: #795da3;
}

.token.entity {
  cursor: help;
}

.token.title,
.token.title .token.punctuation {
  font-weight: bold;
  color: #1d3e81;
}

.token.list {
  color: #ed6a43;
}

.token.inserted {
  background-color: #eaffea;
  color: #55a532;
}

.token.deleted {
  background-color: #ffecec;
  color: #bd2c00;
}

.token.bold {
  font-weight: bold;
}

.token.italic {
  font-style: italic;
}


/* JSON */
.language-json .token.property {
  color: #183691;
}

.language-markup .token.tag .token.punctuation {
  color: #333;
}

/* CSS */
code.language-css,
.language-css .token.function {
  color: #0086b3;
}

/* YAML */
.language-yaml .token.atrule {
  color: #63a35c;
}

code.language-yaml {
  color: #183691;
}

/* Ruby */
.language-ruby .token.function {
  color: #333;
}

/* Markdown */
.language-markdown .token.url {
  color: #795da3;
}

/* Makefile */
.language-makefile .token.symbol {
  color: #795da3;
}

.language-makefile .token.variable {
  color: #183691;
}

.language-makefile .token.builtin {
  color: #0086b3;
}

/* Bash */
.language-bash .token.keyword {
  color: #0086b3;
}html body{font-family:"Helvetica Neue",Helvetica,"Segoe UI",Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ul,html body>ol{margin-bottom:16px}html body ul,html body ol{padding-left:2em}html body ul.no-list,html body ol.no-list{padding:0;list-style-type:none}html body ul ul,html body ul ol,html body ol ol,html body ol ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:bold;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:bold}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em !important;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::before,html body code::after{letter-spacing:-0.2em;content:"\00a0"}html body pre>code{padding:0;margin:0;font-size:.85em !important;word-break:normal;white-space:pre;background:transparent;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;font-size:.85em !important;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:before,html body pre tt:before,html body pre code:after,html body pre tt:after{content:normal}html body p,html body blockquote,html body ul,html body ol,html body dl,html body pre{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body pre,html body code{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview .pagebreak,.markdown-preview .newpage{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center !important}.markdown-preview:not([for="preview"]) .code-chunk .btn-group{display:none}.markdown-preview:not([for="preview"]) .code-chunk .status{display:none}.markdown-preview:not([for="preview"]) .code-chunk .output-div{margin-bottom:16px}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0}@media screen and (min-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px)}}@media screen and (max-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{font-size:14px !important;padding:1em}}@media print{html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,0.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{padding:0 1.6em;margin-top:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc li{margin-bottom:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{list-style-type:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% -  300px);padding:2em calc(50% - 457px -  150px);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
 
      </style>
    </head>
    <body for="html-export">
      <div class="mume markdown-preview   ">
      <ul>
<li><a href="#springmvc">SpringMVC</a>
<ul>
<li><a href="#%E6%A6%82%E8%BF%B0">概述：</a></li>
<li><a href="#dispatcherservlet%E4%BB%8B%E7%BB%8D">DispatcherServlet介绍:</a></li>
<li><a href="#%E7%AC%AC%E4%B8%80%E4%B8%AAspringmvc">第一个springmvc：</a></li>
<li><a href="#%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3%E8%AF%B7%E6%B1%82%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95%E7%9A%84%E5%8F%82%E6%95%B0%E7%B1%BB%E5%9E%8B">常用注解&amp;请求处理方法的参数类型：</a>
<ul>
<li><a href="#1controller%E6%B3%A8%E8%A7%A3">1.@Controller注解：</a></li>
<li><a href="#2requestmapping%E6%B3%A8%E8%A7%A3%E4%B8%BA%E6%8E%A7%E5%88%B6%E5%99%A8%E7%B1%BB%E6%8C%87%E5%AE%9A%E5%8F%AF%E4%BB%A5%E5%A4%84%E7%90%86%E9%82%A3%E4%BA%9Burl%E8%AF%B7%E6%B1%82">2.@RequestMapping注解(为控制器类指定可以处理那些URL请求)：</a></li>
<li><a href="#3pathvariable%E6%B3%A8%E8%A7%A3">3.@PathVariable注解：</a></li>
<li><a href="#4requestparam%E6%B3%A8%E8%A7%A3">4.@RequestParam注解</a></li>
<li><a href="#5requestheader%E6%B3%A8%E8%A7%A3">5.@RequestHeader注解：</a></li>
<li><a href="#6cookievalue%E6%B3%A8%E8%A7%A3">6.@CookieValue注解：</a></li>
<li><a href="#7sessionattributes%E6%B3%A8%E8%A7%A3">7.@SessionAttributes注解：</a></li>
<li><a href="#8modelattribute%E6%B3%A8%E8%A7%A3">8.@ModelAttribute注解：</a>
<ul>
<li><a href="#1%E7%94%A8%E6%B3%95%E4%B8%80modelattribute%E6%B3%A8%E8%A7%A3%E6%9C%89value%E5%B1%9E%E6%80%A7%E5%80%BC">1.用法一：@ModelAttribute注解有value属性值</a></li>
<li><a href="#2%E7%94%A8%E6%B3%95%E4%BA%8Cmodelattribute%E6%B3%A8%E8%A7%A3%E6%B2%A1%E6%9C%89value%E5%B1%9E%E6%80%A7%E5%80%BC">2.用法二：@ModelAttribute注解没有value属性值</a></li>
<li><a href="#3%E7%94%A8%E6%B3%95%E4%B8%89modelattribute-%E4%B8%8E-requestmapping%E5%90%8C%E6%97%B6%E6%B3%A8%E9%87%8A%E4%B8%80%E4%B8%AA%E6%96%B9%E6%B3%95">3.用法三：@ModelAttribute 与 @RequestMapping同时注释一个方法</a></li>
<li><a href="#4%E7%94%A8%E6%B3%95%E5%9B%9Bmodelattribute%E6%A0%87%E8%AE%B0%E4%B8%80%E4%B8%AA%E6%96%B9%E6%B3%95%E7%9A%84%E5%8F%82%E6%95%B0">4.用法四：@ModelAttribute标记一个方法的参数</a></li>
</ul>
</li>
<li><a href="#9httpmessagecovertert-%E6%8E%A5%E5%8F%A3">9.HttpMessageCoverter<T> 接口(★★★)：</T></a></li>
<li><a href="#10requestbody%E6%B3%A8%E8%A7%A3%E4%B8%BB%E8%A6%81%E7%94%A8%E4%BA%8E%E5%A4%84%E7%90%86json%E6%A0%BC%E5%BC%8F%E6%95%B0%E6%8D%AE%E5%B9%B6%E8%BD%AC%E6%8D%A2%E4%B8%BA%E5%AF%B9%E5%BA%94%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">10.@RequestBody注解(主要用于处理json格式数据，并转换为对应的数据类型)：</a></li>
<li><a href="#11%E8%87%AA%E5%AE%9A%E4%B9%89httpmessagecoverter%E6%8E%A5%E5%8F%97json%E6%A0%BC%E5%BC%8F%E7%9A%84%E6%95%B0%E6%8D%AE%E8%BF%99%E9%87%8C%E4%B9%9F%E9%9C%80%E8%A6%81%E5%9C%A8webxml%E4%B8%AD%E6%94%BE%E8%A1%8Cjs%E6%96%87%E4%BB%B6">11.自定义HttpMessageCoverter接受JSON格式的数据(这里也需要在web.xml中放行js文件)：</a></li>
<li><a href="#12springmvc%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8bean%E5%AF%B9%E8%B1%A1%E7%BB%91%E5%AE%9A%E6%96%B9%E6%B3%95%E5%BD%A2%E5%8F%82">12.springmvc可以使用bean对象绑定方法形参：</a></li>
<li><a href="#13%E8%AF%B7%E6%B1%82%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95%E5%8F%AF%E4%BB%A5%E6%94%AF%E6%8C%81%E5%A4%9A%E7%A7%8D%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%8F%82%E6%95%B0">13.请求处理方法可以支持多种数据类型的参数：</a></li>
<li><a href="#14modelandview%E6%A8%A1%E5%9E%8B%E5%92%8C%E8%A7%86%E5%9B%BE%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-model-modelmap">14.ModelAndView(模型和视图数据类型)&amp; Model &amp; ModelMap：</a></li>
</ul>
</li>
<li><a href="#springmvc%E7%9A%84%E6%95%B0%E6%8D%AE%E8%BD%AC%E6%8D%A2%E6%A0%BC%E5%BC%8F%E5%8C%96">Springmvc的数据转换，格式化：</a>
<ul>
<li><a href="#1-%E4%BD%BF%E7%94%A8converterst%E6%8E%A5%E5%8F%A3%E8%BD%AC%E6%8D%A2%E6%95%B0%E6%8D%AE%E6%94%AF%E6%8C%81%E4%BB%BB%E6%84%8F%E7%B1%BB%E5%9E%8B%E4%B9%8B%E9%97%B4%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2%E4%BE%8B%E5%A6%82string-date">1. 使用Converter&lt;S,T&gt;接口转换数据（支持任意类型之间相互转换，例如：String -&gt; Date）：</a></li>
<li><a href="#2-%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%8F%AA%E6%94%AF%E6%8C%81string-%E5%85%B6%E4%BB%96%E7%B1%BB%E5%9E%8B%E5%AF%B9%E8%B1%A1%E4%BE%8B%E5%A6%82string-date">2. 数据格式化（只支持String-&gt;其他类型对象，例如：String-&gt; Date）：</a></li>
</ul>
</li>
<li><a href="#springmvc-%E7%9A%84%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8E%E4%B8%8B%E8%BD%BD">SpringMVC 的文件上传与下载：</a>
<ul>
<li><a href="#1%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E5%88%B0d%E7%9B%98%E4%B8%AD">1.文件上传(上传图片到D盘中)：</a></li>
<li><a href="#2%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E4%B8%8B%E8%BD%BDd%E7%9B%98%E7%9A%84%E5%9B%BE%E7%89%87">2.文件下载(下载D盘的图片)：</a></li>
</ul>
</li>
<li><a href="#springmvc-%E6%8B%A6%E6%88%AA%E5%99%A8">SpringMVC 拦截器:</a></li>
<li><a href="#rest%E9%A3%8E%E6%A0%BC%E5%85%A8%E7%A7%B0resource-representational-state-transfer%E8%B5%84%E6%BA%90%E8%A1%A8%E7%8E%B0%E5%B1%82%E7%8A%B6%E6%80%81%E4%BC%A0%E9%80%92">Rest风格（全称：Resource Representational State Transfer，资源表现层状态传递）：</a></li>
</ul>
</li>
</ul>
<h1 class="mume-header" id="springmvc">SpringMVC</h1>

<h2 class="mume-header" id="%E6%A6%82%E8%BF%B0">概述：</h2>

<p>  Spring MVC属于SpringFrameWork的后续产品，已经融合在Spring Web Flow里面。Spring 框架提供了构建 Web 应用程序的全功能 MVC 模块。使用 Spring 可插入的 MVC 架构，从而在使用Spring进行WEB开发时，可以选择使用Spring的SpringMVC框架或集成其他MVC开发框架，如Struts1，Struts2等。</p>
<p>  Spring的模型-视图-控制器（MVC）框架是围绕一个<font color="red"> DispatcherServlet </font>来设计的，<font color="blue">这个Servlet会把你做出的各个请求按照你事先定好的规则分发给各个处理器，</font>并支持可配置的处理器映射、视图渲染、本地化、时区与主题渲染等，甚至还能支持文件上传。<strong>处理器是你的应用中注解了@Controller和@RequestMapping的类和方法</strong>，Spring为处理器方法提供了极其多样灵活的配置。</p>
<h2 class="mume-header" id="dispatcherservlet%E4%BB%8B%E7%BB%8D">DispatcherServlet介绍:</h2>

<p>  Spring MVC框架，与其他很多web的MVC框架一样：请求驱动；<font color="red">所有设计都围绕着一个中央Servlet来展开，它负责把所有请求分发到控制器；</font>同时提供其他web应用开发所需要的功能。不过Spring的中央处理器，DispatcherServlet，能做的比这更多。<strong>它与Spring IoC容器做到了无缝集成，这意味着，Spring提供的任何特性，在Spring MVC中你都可以使用。</strong></p>
<p>  下图展示了Spring Web MVC的DispatcherServlet处理请求的工作流。DispatcherServlet应用的其实就是一个“前端控制器”的设计模式（其他很多优秀的web框架也都使用了这个设计模式）。</p>
<p><img src="../img/springmvc_img/1.png" alt="&#x6D41;&#x7A0B;&#x56FE;"></p>
<h2 class="mume-header" id="%E7%AC%AC%E4%B8%80%E4%B8%AAspringmvc">第一个springmvc：</h2>

<p><img src="../img/springmvc_img/2.png" alt="2.png"></p>
<h4>1. 导入spring的所有jar包。</h4>
<h4>2. 编写web.xml(配置DispatcherServlet和springmvc配置文件的位置)</h4>
<pre class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>
	<span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://java.sun.com/xml/ns/javaee<span class="token punctuation">"</span></span>
	<span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd<span class="token punctuation">"</span></span>
	<span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>WebApp_ID<span class="token punctuation">"</span></span> <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>3.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

<span class="token comment" spellcheck="true">&lt;!-- 配置DispatcherServlet  --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>springmvc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">></span></span>org.springframework.web.servlet.DispatcherServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">></span></span>
      
    <span class="token comment" spellcheck="true">&lt;!-- 设置 springmvc 配置文件的位置 --></span> 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">></span></span>contextConfigLocation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">></span></span>classpath:springmvc_config.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">></span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>load-on-startup</span><span class="token punctuation">></span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>load-on-startup</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">></span></span>

<span class="token comment" spellcheck="true">&lt;!-- '/' 表示 springmvc 这个servlet 拦截所有请求  --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>springmvc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span>
  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">></span></span>

</pre>
<h4>3. 编写springmvc配置文件(springmvc_config.xml)</h4>
<pre class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span>  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span>  
    <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span>  
    <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>  
    <span class="token attr-name"><span class="token namespace">xmlns:</span>tx</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/tx<span class="token punctuation">"</span></span>  
    <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/context<span class="token punctuation">"</span></span>    
    <span class="token attr-name"><span class="token namespace">xmlns:</span>mvc</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/mvc<span class="token punctuation">"</span></span>    
    <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans   
    http://www.springframework.org/schema/beans/spring-beans-3.2.xsd   
    http://www.springframework.org/schema/tx   
    http://www.springframework.org/schema/tx/spring-tx-3.2.xsd  
    http://www.springframework.org/schema/context  
    http://www.springframework.org/schema/context/spring-context-3.2.xsd  
    http://www.springframework.org/schema/mvc  
    http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  
  
    <span class="token comment" spellcheck="true">&lt;!-- 自动扫描的包名 ， 若扫描到spring注解的类，这些类被注册为bean --></span>  
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.Controller<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>  
  
    <span class="token comment" spellcheck="true">&lt;!-- 默认的注解映射的支持，自动注册DefaultAnnotationHandlerMapping和AnnotationMethodHandlerAdapter 
       	 该配置的的作用： Spring MVC为@Controller分发请求所必需的。 并且提供了数据绑定支持，读写JSON的支持（默认Jackson）等功能。.
    --></span>  
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>annotation-driven</span> <span class="token punctuation">/></span></span>  
  
    <span class="token comment" spellcheck="true">&lt;!-- 视图解析器， 把控制器的方法 返回的值通过   prefix + 返回值  + suffix 的形式，得到响应的jsp页面 --></span>  
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>org.springframework.web.servlet.view.InternalResourceViewResolver<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>prefix<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/WEB-INF/views/<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>  
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>suffix<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>.jsp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>  
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">></span></span>   
</pre>
<h4>4. 编写控制器 HelloController（DispatcherServlet接受请求后执行的操作）</h4>
<pre class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>Controller<span class="token punctuation">;</span>

<span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span>Controller<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>RequestMapping<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>ModelAndView<span class="token punctuation">;</span>

<span class="token annotation punctuation">@Controller</span>    <span class="token comment" spellcheck="true">//指示该类是一个控制器</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">{</span>
	
   	<span class="token comment" spellcheck="true">/** 1. 使用@RequestMapping注解来映射url请求
   	 *  2. 方法的返回值会通过视图解析器的加工，得到某个jsp页面的位置，然后做具体的转发操作：
   	 *  		prefix+ 返回值 + suffix  :  /WEB-INF/views/hello.jsp
   	 * 	
   	 *  3. ModelAndView对象，该对象包含了返回的视图名，模型的名称，模型对象的名称
   	 * @return
   	 */</span>
   	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"/sayhello"</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> ModelAndView <span class="token function">sayhello</span><span class="token punctuation">(</span>ModelAndView model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"say hello "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   		model<span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token comment" spellcheck="true">//该值会被视图解析器解析</span>
   		model<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> <span class="token string">"Hello world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//添加模型数据，可以在返回的视图中取出模型数据</span>
		<span class="token keyword">return</span> model<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</pre>
<h4>5. 编写jsp页面（一个发送请求的index.jsp，一个控制器返回的jsp页面hello.jsp）</h4>
<pre class="language-html"><span class="token comment" spellcheck="true">&lt;!--index.jsp--></span>
&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<span class="token doctype">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Content-Type<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/html; charset<span class="token punctuation">=</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Insert title here<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sayhello<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>发送sayhello请求给DispatcherServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span>


=================================

<span class="token comment" spellcheck="true">&lt;!--hello.jsp--></span>
&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<span class="token doctype">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Content-Type<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/html; charset<span class="token punctuation">=</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Insert title here<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
<span class="token comment" spellcheck="true">&lt;!-- 通过EL表达式，取出模型数据 --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span>${requestScope.message }<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>
this is hello.jsp

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span>

</pre>
<h4>6.分析：</h4>
<font color="red">
1. 当用户点击index.jsp的a标签, 该请求被DispatcherServlet拦截。
<ol start="2">
<li>
<p>DispatcherServlet 会根据该请求的名称，执行对应的控制器方法。</p>
</li>
<li>
<p>控制器方法会处理业务逻辑代码。完成后，会返回字符串，该字符串会被视图解析器，解析成响应的jsp页面的位置。</p>
</li>
<li>
<p>打开解析的jsp页面。<br>
</p></li></ol></font><br>
<br>


<h2 class="mume-header" id="%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3%E8%AF%B7%E6%B1%82%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95%E7%9A%84%E5%8F%82%E6%95%B0%E7%B1%BB%E5%9E%8B">常用注解&amp;请求处理方法的参数类型：</h2>

<h3 class="mume-header" id="1controller%E6%B3%A8%E8%A7%A3">1.@Controller注解：</h3>

<p>  @Controller注解用于标记一个类，被它标记的类就是一个控制器类。<br>
  控制器类负责处理由DispatcherServlet 分发的请求，它把用户请求的数据经过业务处理层处理之后封装成一个Model ，然后再把该Model 返回给对应的View 进行展示。</p>
<font color="red">
springmvc的DispatcherServlet如何找到对应的控制器类 ？ 当spring的ioc容器启动时。通过扫描到@Controller注解，来把该控制器类注入到ioc容器中。
</font>
```xml
 <!-- 自动扫描的包名 ， 若扫描到spring注解的类，这些类被注册为bean -->  
    <context:component-scan base-package="com.Controller"></context:component-scan>  
```
<h3 class="mume-header" id="2requestmapping%E6%B3%A8%E8%A7%A3%E4%B8%BA%E6%8E%A7%E5%88%B6%E5%99%A8%E7%B1%BB%E6%8C%87%E5%AE%9A%E5%8F%AF%E4%BB%A5%E5%A4%84%E7%90%86%E9%82%A3%E4%BA%9Burl%E8%AF%B7%E6%B1%82">2.@RequestMapping注解(为控制器类指定可以处理那些URL请求)：</h3>

<p><mark>DispatcherServlet 拦截请求后，springmvc会根据@RequestMapping 提供的映射信息来确定对应的处理方法。</mark></p>
<ol>
<li>@RequestMapping注解可以标记在类上和方法上：</li>
</ol>
<ul>
<li>标记在类上： 相当与类级别的处理器。</li>
<li>标记在方法上： 相当与方法级别的处理器。</li>
<li>类上的URL映射可以与方法上的URL映射进行拼接。</li>
</ul>
<pre class="language-java"><span class="token annotation punctuation">@Controller</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"first"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">firstController</span> <span class="token punctuation">{</span>
	
	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"login"</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> String <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"this is login"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</pre>
<pre class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>first/login<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>sss<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
</pre>
<ol start="2">
<li>@RequestMapping注解有六个属性(对应Http请求报文)：</li>
</ol>
<pre class="language-java"><span class="token comment" spellcheck="true">/*@RequestMapping 有六种属性
	 * 
	 * 1. value(请求的URL)  : 指定URL请求的实际地址。

	 * 2. method(请求的方法) : 指示该方法仅仅处理那些请求post/get 若不写，则可处理任意请求。

	 * 3. consumes : 表示方法仅处理  application/json 类型的请求。

	 * 4. produces : 指明返回的内容类型

	 * 5. params（请求参数）   : 指定request中必须包含某些参数值时，才让该方法处理(这里是，该方法仅仅处理请求参数名为myparam，值为myvalue的请求)

	 * 6. headers（请求头）  : 指定request中必须包含某些指定的header值，才能让该方法处理请求。(这里是仅仅处理 header中包含了指定Referer请求头，对应值为http://www.abc.org/的请求 )

	 * */</span>
	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"/sayhello"</span><span class="token punctuation">,</span> method<span class="token operator">=</span>RequestMethod<span class="token punctuation">.</span>GET<span class="token punctuation">,</span>consumes<span class="token operator">=</span><span class="token string">"application/json"</span><span class="token punctuation">,</span>produces<span class="token operator">=</span><span class="token string">"application/json"</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> ModelAndView <span class="token function">test</span><span class="token punctuation">(</span>ModelAndView model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> model<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"/sayhello2"</span><span class="token punctuation">,</span>params<span class="token operator">=</span><span class="token string">"myparam=myvalue"</span><span class="token punctuation">,</span>headers<span class="token operator">=</span><span class="token string">"Referer=http://www.abc.org/"</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> ModelAndView <span class="token function">test1</span><span class="token punctuation">(</span>ModelAndView model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   	    
		<span class="token keyword">return</span> model<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</pre>
<h3 class="mume-header" id="3pathvariable%E6%B3%A8%E8%A7%A3">3.@PathVariable注解：</h3>

<p><font color="red">此注解可以很方便的获取请求URL中的动态参数</font></p>
<pre class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>test_PathVariable/1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>测试@PathVariable注解<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
</pre>
<pre class="language-java">     <span class="token comment" spellcheck="true">/*
	 * 通过@PathVariable("id") 可以把URL请求中的占位符参数绑定 到方法的形参中
	 * 
	 * index.jsp 的URL请求：  test_PathVariable/1
	 */</span>
	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/test_PathVariable/{id}"</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> String <span class="token function">test3</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">)</span> Integer id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"id  "</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">//此处的id=1 </span>
		<span class="token keyword">return</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</pre>
<h3 class="mume-header" id="4requestparam%E6%B3%A8%E8%A7%A3">4.@RequestParam注解</h3>

<p>  @RequestParam注解会把Http请求的参数信息绑定到响应的方法的形参中。</p>
<ol>
<li>value属性：请求参数的属性名。</li>
<li>required : 请求参数中是否必须存在，默认为 true。<br>
<font color="red">注意：@RequestParam注解绑定的请求参数信息必须在url中存在。若不存在时，报出异常。</font></li>
</ol>
<pre class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>RequestParam?username<span class="token punctuation">=</span>xiaoming&amp;age<span class="token punctuation">=</span>12<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>测试@RequestParam注解<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
</pre>
<pre class="language-java">    <span class="token comment" spellcheck="true">/** @RequestParam 会把请求的url中的参数信息，绑定到处理方法的形参上。
	 *  注意： 若url的参数信息没有 @RequestParam 标识的值，程序会报异常。
	 *  
	 *  required=false :表示该属性不是必须的，即使url的参数信息没有username，程序也不会报异常。
	 *  defaultValue="aa" : 表示该请求参数的默认值。
	 *  
	 * @param model
	 * @param username
	 * @param age
	 * @return
	 */</span>
	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"/RequestParam"</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> ModelAndView <span class="token function">testRequestParam</span><span class="token punctuation">(</span>ModelAndView model<span class="token punctuation">,</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"username"</span><span class="token punctuation">,</span>required<span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">,</span>defaultValue<span class="token operator">=</span><span class="token string">"aa"</span><span class="token punctuation">)</span>
                                        String username<span class="token punctuation">,</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"age"</span><span class="token punctuation">)</span> Integer age<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"username :"</span><span class="token operator">+</span>username<span class="token operator">+</span><span class="token string">"  age: "</span><span class="token operator">+</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>      
   		model<span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment" spellcheck="true">//该值会被视图解析器解析</span>
		<span class="token keyword">return</span> model<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</pre>
<h3 class="mume-header" id="5requestheader%E6%B3%A8%E8%A7%A3">5.@RequestHeader注解：</h3>

<p>  可以把URL请求header部分的值绑定到方法的参数上。</p>
<pre class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>RequestHeader<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>测试@RequestHeader注解<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
</pre>
<pre class="language-java"><span class="token comment" spellcheck="true">/**@RequestHeader注解：
	 *  绑定请求信息的请求头部分，到方法的参数上。
	 	这里会把请求头的 Accept-Language 的值 赋到al参数上。
	 * @param model
	 * @param al
	 * @return
	 */</span>
	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"/RequestHeader"</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> ModelAndView <span class="token function">testRequestHeader</span><span class="token punctuation">(</span>ModelAndView model<span class="token punctuation">,</span><span class="token annotation punctuation">@RequestHeader</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"Accept-Language"</span><span class="token punctuation">)</span> String al<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Accept-Language : "</span><span class="token operator">+</span>al<span class="token punctuation">)</span><span class="token punctuation">;</span>      
   		model<span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                   
		<span class="token keyword">return</span> model<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
   	
</pre>
<h3 class="mume-header" id="6cookievalue%E6%B3%A8%E8%A7%A3">6.@CookieValue注解：</h3>

<p><font color="red">用于把请求的cookie数据绑定到方法参数上</font></p>
<pre class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>CookieValue<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>测试@CookieValue注解<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
</pre>
<pre class="language-java"><span class="token comment" spellcheck="true">/**
	 * 用法同@RequestHeader注解相同
	 这里把cookie中的JSESSIONID值 赋值给 参数
	 */</span>
	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"/CookieValue"</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> ModelAndView <span class="token function">testCookieValue</span><span class="token punctuation">(</span>ModelAndView model<span class="token punctuation">,</span><span class="token annotation punctuation">@CookieValue</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"JSESSIONID"</span><span class="token punctuation">)</span> String cookievalue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"CookieValue : "</span><span class="token operator">+</span>cookievalue<span class="token punctuation">)</span><span class="token punctuation">;</span>      
   		model<span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                     <span class="token comment" spellcheck="true">//跳转到hello.jsp页面</span>
		<span class="token keyword">return</span> model<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</pre>
<h3 class="mume-header" id="7sessionattributes%E6%B3%A8%E8%A7%A3">7.@SessionAttributes注解：</h3>

<p>该注解可以指定Model中的某些属性加入到HttpSession对象中。<font color="red">@SessionAttributes注解只能声明在类上，不能声明在方法上</font></p>
<p>index.jsp:</p>
<pre class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>SessionAttributes<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
username:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
password:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>
</pre>
<p>HelloController.java:</p>
<pre class="language-java"><span class="token annotation punctuation">@SessionAttributes</span><span class="token punctuation">(</span>value<span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"username"</span><span class="token punctuation">,</span><span class="token string">"password"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//把model中的属性名为 username , password 的属性放入HttpSession对象中。</span>
<span class="token annotation punctuation">@Controller</span>    <span class="token comment" spellcheck="true">//指示该类是一个控制器</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">{</span>

	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"/SessionAttributes"</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> ModelAndView <span class="token function">testSessionAttributes</span><span class="token punctuation">(</span>ModelAndView model<span class="token punctuation">,</span>HttpServletRequest request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"username  :"</span><span class="token operator">+</span>request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">" password:"</span><span class="token operator">+</span>request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment" spellcheck="true">//获取表单传过来的username</span>
		model<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment" spellcheck="true">//添加模型数据到ModelAndView中</span>
		model<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		model<span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                                          <span class="token comment" spellcheck="true">//设置响应的视图名称</span>
		<span class="token keyword">return</span> model<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</pre>
<p>hello.jsp:</p>
<pre class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span> request username: ${requestScope.username }<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span> session username: ${sessionScope.username }<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span> request password: ${requestScope.password }<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span> session password: ${sessionScope.password }<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>

</pre>
<p><img src="../img/springmvc_img/3.png" alt="3-png"></p>
<h3 class="mume-header" id="8modelattribute%E6%B3%A8%E8%A7%A3">8.@ModelAttribute注解：</h3>

<h4 class="mume-header" id="1%E7%94%A8%E6%B3%95%E4%B8%80modelattribute%E6%B3%A8%E8%A7%A3%E6%9C%89value%E5%B1%9E%E6%80%A7%E5%80%BC">1.用法一：@ModelAttribute注解有value属性值</h4>

<p>index.jsp:</p>
<pre class="language-html">
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ModelAttribute_1<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
username:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>
</pre>
<pre class="language-java"><span class="token comment" spellcheck="true">/*
	 * 有@ModelAttribute标记的方法，会在所有的请求处理方法之前被调用一次。
	 * 
	 * 1. 在这次例子中，ModelAttribute_method方法会优先testModelAttribute方法调用。
	 * 2. 它会把index.jsp 页面的请求参数username 赋值给方法的形参的un.
	 * 3. 并在 model中 设置一个  属性名为username ，其属性值为 方法的返回值 un
	 * */</span>
	<span class="token annotation punctuation">@ModelAttribute</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"username"</span><span class="token punctuation">)</span>      <span class="token comment" spellcheck="true">//这里的 value="username" 表示在model设置一个属性。属性的名称为username，而属性的值就是该方法的返回值</span>
	<span class="token keyword">public</span> String <span class="token function">ModelAttribute_method</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"username"</span><span class="token punctuation">)</span> String un<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"un :"</span><span class="token operator">+</span>un<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>un<span class="token operator">!=</span>null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			un<span class="token operator">=</span>un<span class="token operator">+</span><span class="token string">"  by ModelAttribute_method"</span><span class="token punctuation">;</span>     <span class="token comment" spellcheck="true">//这里对传过来的username请求参数进行加工</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> un<span class="token punctuation">;</span>               
	<span class="token punctuation">}</span>
	
	
	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"/ModelAttribute_2"</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> String <span class="token function">testModelAttribute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</pre>
<p>hello.jsp:</p>
<pre class="language-html"><span class="token comment" spellcheck="true">&lt;!-- 通过EL表达式，取出model中的数据 --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span> request username: ${requestScope.username }<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>
</pre>
<h4 class="mume-header" id="2%E7%94%A8%E6%B3%95%E4%BA%8Cmodelattribute%E6%B3%A8%E8%A7%A3%E6%B2%A1%E6%9C%89value%E5%B1%9E%E6%80%A7%E5%80%BC">2.用法二：@ModelAttribute注解没有value属性值</h4>

<p>index.jsp:</p>
<pre class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ModelAttribute_2<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
username:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
password:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>

</pre>
<pre class="language-java">
	<span class="token comment" spellcheck="true">/*
	 * 有@ModelAttribute标记的方法，会在所有的请求处理方法之前被调用一次。
	 * 
	 * 在这次例子中，ModelAttribute_method方法会优先testModelAttribute方法调用。
	 * */</span>
	<span class="token annotation punctuation">@ModelAttribute</span>   
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">ModelAttribute_method</span><span class="token punctuation">(</span>Model model<span class="token punctuation">,</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"username"</span><span class="token punctuation">)</span> String un<span class="token punctuation">,</span>
			<span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"password"</span><span class="token punctuation">)</span> String pd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span> un<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment" spellcheck="true">//在model中添加一个属性。  属性名为username ，其属性值un</span>
		model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">,</span>pd<span class="token punctuation">)</span><span class="token punctuation">;</span>         
	<span class="token punctuation">}</span>
	
	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"/ModelAttribute_2"</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> String <span class="token function">testModelAttribute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</pre>
<pre class="language-html"><span class="token comment" spellcheck="true">&lt;!-- 通过EL表达式，取出模型数据 --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span> request username: ${requestScope.username }<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span> request password: ${requestScope.password }<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>
</pre>
<p><strong>运行结果：</strong></p>
<blockquote>
<p>request username: syx<br>
request password: 1231</p>
</blockquote>
<h4 class="mume-header" id="3%E7%94%A8%E6%B3%95%E4%B8%89modelattribute-%E4%B8%8E-requestmapping%E5%90%8C%E6%97%B6%E6%B3%A8%E9%87%8A%E4%B8%80%E4%B8%AA%E6%96%B9%E6%B3%95">3.用法三：@ModelAttribute 与 @RequestMapping同时注释一个方法</h4>

<pre class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>hello?username<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>@ModelAttribute注解用法三<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
</pre>
<pre class="language-java"><span class="token comment" spellcheck="true">/**
	 * 注意：发送请求时，要携带请求参数 username
	 *  
	 * @return
	 */</span> 
	<span class="token annotation punctuation">@ModelAttribute</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"username"</span><span class="token punctuation">)</span>       <span class="token comment" spellcheck="true">//在model中设置一个属性。名为 username ， 值为方法的返回值 "xiaoming"</span>
	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"/hello"</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//这里的 /hello  是视图名称， 就是@RequestMapping 的value值</span>
	<span class="token keyword">public</span> String <span class="token function">testModelAttribute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token string">"xiaoming"</span><span class="token punctuation">;</span>                  <span class="token comment" spellcheck="true">//方法的返回值不是视图的名称，而是属性值</span>
	<span class="token punctuation">}</span>
	
</pre>
<pre class="language-html"><span class="token comment" spellcheck="true">&lt;!-- 通过EL表达式，取出model中的数据 --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span> request username: ${requestScope.username }<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>
</pre>
<h4 class="mume-header" id="4%E7%94%A8%E6%B3%95%E5%9B%9Bmodelattribute%E6%A0%87%E8%AE%B0%E4%B8%80%E4%B8%AA%E6%96%B9%E6%B3%95%E7%9A%84%E5%8F%82%E6%95%B0">4.用法四：@ModelAttribute标记一个方法的参数</h4>

<pre class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ModelAttribute_4<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
id:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
name:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
birth:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>date<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>birth<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>

</pre>
<pre class="language-java">	<span class="token comment" spellcheck="true">/*
	 * 在model设置一个属性，属性名为 orders ，值为方法返回值ord ，就是表单传过来的值
	 * */</span>
	<span class="token annotation punctuation">@ModelAttribute</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"orders"</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> Orders <span class="token function">ModelAttribute_method</span><span class="token punctuation">(</span>Orders ord_value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> ord_value<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment" spellcheck="true">/*
	 * @ModelAttribute(value="orders") Orders ord    
	 *  
	 *  表示参数ord 的值就是 model中 属性为orders的值 ord_value
	 * */</span>
	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/ModelAttribute_4"</span><span class="token punctuation">)</span> 
	<span class="token keyword">public</span> String <span class="token function">testModelAttribute</span><span class="token punctuation">(</span><span class="token annotation punctuation">@ModelAttribute</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"orders"</span><span class="token punctuation">)</span> Orders ord<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		ord<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"这是被修改的orders.name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment" spellcheck="true">//把参数的name属性值，修改</span>
		<span class="token keyword">return</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>                         <span class="token comment" spellcheck="true">//视图名称</span>
	<span class="token punctuation">}</span>

</pre>
<pre class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span> id: ${orders.id }<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span> name: ${orders.name }<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span> birth: ${orders.birth }<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>
</pre>
<p><img src="../img/springmvc_img/4.png" alt="4-png"></p>
<h3 class="mume-header" id="9httpmessagecovertert-%E6%8E%A5%E5%8F%A3">9.HttpMessageCoverter<T> 接口(★★★)：</T></h3>

<p><font color="red">这个接口，它负责将请求信息转换为一个对象或bean（类型为 T ）,并将bean或对象绑定到请求处理方法的参数中，或者绑定到请求处理方法的返回值（响应信息中）。</font></p>
<p><strong>DispatcherServlet 装配了默认的<mark>RequestMappingHandlerAdapter</mark>类 作为HttpMessageCoverter接口的实现类。</strong></p>
<blockquote>
<p>RequestMappingHandlerAdapter<br>
<font color="blue">该类作用是把请求信息转化为对象，或者把对象转化为响应信息。</font></p>
</blockquote>
<p>当使用 <code>&lt;mvc:annotation-driven /&gt;</code>标签配置springmvc时，默认配置了<mark>RequestMappingHandlerAdapter</mark></p>
<h4>处理流程：</h4>
<p><img src="../img/springmvc_img/5.png" alt="4-png"></p>
<h3 class="mume-header" id="10requestbody%E6%B3%A8%E8%A7%A3%E4%B8%BB%E8%A6%81%E7%94%A8%E4%BA%8E%E5%A4%84%E7%90%86json%E6%A0%BC%E5%BC%8F%E6%95%B0%E6%8D%AE%E5%B9%B6%E8%BD%AC%E6%8D%A2%E4%B8%BA%E5%AF%B9%E5%BA%94%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">10.@RequestBody注解(主要用于处理json格式数据，并转换为对应的数据类型)：</h3>

<p><font color="red">该注解用于读取Request请求的body部分数据,使用系统默认配置的HttpMessageConverter接口的实现类，进行解析成对象或者bean,并绑定到controller中方法的参数上。</font></p>
<p><strong>注意：springmvc 默认使用 Jackson来转换 json格式的数据，所以在使用前，要下载 jackson的jar包</strong></p>
<p>jackson的jar包：</p>
<blockquote>
<p>jackson-annotations-2.9.0.jar<br>
jackson-core-2.9.0.jar<br>
jackson-databind-2.9.0.jar</p>
</blockquote>
<p>demo:</p>
<p><font color="red">注意，这里使用js文件，需要在web.xml中设置对js资源文件不要拦截 </font></p>
<p>index.jsp:</p>
<pre class="language-html">
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>jq/jquery.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>  <span class="token comment" spellcheck="true">&lt;!-- 注意，这里使用js文件，需要在web.xml中对js资源文件不要拦截 --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Insert title here<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">

	<span class="token keyword">function</span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			type<span class="token punctuation">:</span><span class="token string">"post"</span><span class="token punctuation">,</span>
			<span class="token comment" spellcheck="true">//dataType:"json",                                 //服务器返回的数据格式</span>
			contentType<span class="token punctuation">:</span><span class="token string">'application/json;charset=UTF-8'</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">//contentType :上传给服务器的数据格式</span>
			data<span class="token punctuation">:</span>JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"id"</span><span class="token punctuation">:</span><span class="token string">"1"</span><span class="token punctuation">,</span><span class="token string">"name"</span><span class="token punctuation">:</span><span class="token string">"xiaoming"</span><span class="token punctuation">,</span><span class="token string">"birth"</span><span class="token punctuation">:</span><span class="token string">"2012-2-2"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>   <span class="token comment" spellcheck="true">//把发送的数据变成json格式</span>
			url<span class="token punctuation">:</span><span class="token string">"test_RequestBody"</span><span class="token punctuation">,</span>                          <span class="token comment" spellcheck="true">//${pageContext.request.contextPath} 表示当前项目的根路径</span>
			success<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">{</span>                     <span class="token comment" spellcheck="true">//当请求处理方法添加了@ResponseBody注解后，</span>
				<span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"success "</span><span class="token operator">+</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>                  <span class="token comment" spellcheck="true">// result就是该方法的返回值。</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			error<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"shibai "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>select()<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>按钮1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>

</pre>
<p>web.xml:</p>
<pre class="language-xml"><span class="token comment" spellcheck="true">&lt;!-- 放行页面的js,html,jpg,css等静态资源 --></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>default<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>*.css<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>default<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>*.js<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>default<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>*.jpg<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>default<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>*.html<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span> 
</pre>
<p>firstController.java:</p>
<pre class="language-java"><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">firstController</span> <span class="token punctuation">{</span>
	
	<span class="token comment" spellcheck="true">/**
	 * 1. @RequestBody 用于处理 由前台页面提交的json或xml格式的数据
	 *    （或用于读取Request请求的body部分数据），并绑定到请求处理方法的参数上。
	 * 
	 * 2. @ResponseBody 把请求处理方法的返回值，
	 *    变成响应数据（写进Response对象的body数据区）而不是页面的名称。
	 * 
	 * 3. 当该方法返回String类型时，若没有添加@ResponseBody注解，
	 *    则该String类型的返回值会被视图解析器解析。变成某个视图页面
	 *    
	 * 4. 若添加@ResponseBody注解，则String类型的返回值，会直接返回给ajax的success回调函数
	 * 
	 * @param ord
	 * @return
	 */</span>
	<span class="token annotation punctuation">@ResponseBody</span>
	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"test_RequestBody"</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> String <span class="token function">test_RequestBody</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> Orders ord<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ord : "</span><span class="token operator">+</span>ord<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>         
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre>
<h3 class="mume-header" id="11%E8%87%AA%E5%AE%9A%E4%B9%89httpmessagecoverter%E6%8E%A5%E5%8F%97json%E6%A0%BC%E5%BC%8F%E7%9A%84%E6%95%B0%E6%8D%AE%E8%BF%99%E9%87%8C%E4%B9%9F%E9%9C%80%E8%A6%81%E5%9C%A8webxml%E4%B8%AD%E6%94%BE%E8%A1%8Cjs%E6%96%87%E4%BB%B6">11.自定义HttpMessageCoverter接受JSON格式的数据(这里也需要在web.xml中放行js文件)：</h3>

<p><font color="red">由于springmvc的HttpMessageCoverter默认使用 jackson 处理json数据，但有些时候可以使用其他开源jar包来处理json数据，例如：fastjson。</font></p>
<p>在springmvc_config.xml 文件中进行如下配置：<br>
<font color="red">让springmvc使用fastjson作为http消息转换器的实现类。</font></p>
<pre class="language-xml"> <span class="token comment" spellcheck="true">&lt;!-- 设置配置方案 --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>annotation-driven</span><span class="token punctuation">></span></span>
			<span class="token comment" spellcheck="true">&lt;!-- 不使用默认的消息转换器 --></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>message-converters</span> <span class="token attr-name">register-defaults</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
				<span class="token comment" spellcheck="true">&lt;!-- 配置Spring的转换器 --></span>
		      	 	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>org.springframework.http.converter.StringHttpMessageConverter<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
			    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>org.springframework.http.converter.xml.XmlAwareFormHttpMessageConverter<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
		    		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>org.springframework.http.converter.ByteArrayHttpMessageConverter<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
			    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>org.springframework.http.converter.BufferedImageHttpMessageConverter<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
		    		<span class="token comment" spellcheck="true">&lt;!-- 配置fastjson中实现HttpMessageConverter接口的转换器 ,
		    		      FastJsonHttpMessageConverter是实现HttpMessageConverter接口的实现类 --></span>
			    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>fastJsonHttpMessageConverter<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.alibaba.fastjson.support.spring.FastJsonHttpMessageConverter<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		    			<span class="token comment" spellcheck="true">&lt;!-- 加入支持的媒体类型，返回contentType --></span>
		    			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>supportedMediaTypes<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		    				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>list</span><span class="token punctuation">></span></span>
		    				<span class="token comment" spellcheck="true">&lt;!-- 注意：这里的顺序不能反 --></span>
		    					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>text/html;charset=UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>
			    				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>application/json;charset=UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>
		    				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>list</span><span class="token punctuation">></span></span>
		    			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
			    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>message-converters</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>annotation-driven</span><span class="token punctuation">></span></span>
</pre>
<pre class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">

	<span class="token keyword">function</span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			type<span class="token punctuation">:</span><span class="token string">"post"</span><span class="token punctuation">,</span>
			dataType<span class="token punctuation">:</span><span class="token string">"json"</span><span class="token punctuation">,</span>                                 <span class="token comment" spellcheck="true">//服务器返回的数据格式</span>
			contentType<span class="token punctuation">:</span><span class="token string">'application/json;charset=UTF-8'</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">//contentType :上传给服务器的数据格式</span>
			data<span class="token punctuation">:</span>JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"id"</span><span class="token punctuation">:</span><span class="token string">"1"</span><span class="token punctuation">,</span><span class="token string">"name"</span><span class="token punctuation">:</span><span class="token string">"xiaoming"</span><span class="token punctuation">,</span><span class="token string">"birth"</span><span class="token punctuation">:</span><span class="token string">"2012-2-2"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>   <span class="token comment" spellcheck="true">//把发送的数据变成json格式</span>
			url<span class="token punctuation">:</span><span class="token string">"test_fastjson_RequestBody"</span><span class="token punctuation">,</span>                 <span class="token comment" spellcheck="true">//${pageContext.request.contextPath} 表示当前项目的根路径</span>
			success<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">{</span>                        
				<span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"success : "</span><span class="token operator">+</span>JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment" spellcheck="true">//result 是通过@ResponseBody注解 把请求处理方法的返回值写入到 response信息中</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>												 	<span class="token comment" spellcheck="true">//，被ajax的success的回调函数接受。</span>
			error<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>									<span class="token comment" spellcheck="true">//JSON.stringify(result) ： 把对象转换为json字符串</span>
				<span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"shibai "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>select()<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>按钮1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
</pre>
<pre class="language-java"><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecondController</span> <span class="token punctuation">{</span>
		
	    <span class="token comment" spellcheck="true">/** @ResponseBody 注解：
	     * 	 用于把Controller的方法返回值，通过合适的http消息转换器（HttpMessageCoverter）,
	     * 	转换为指定的格式，并写入到response响应的body数据区中。
	     *  通常当返回的数据不是html页面，而是其他格式（json.xml）的数据时，使用它。	
	     * 	
	     * @param ord
	     * @return
	     */</span>
	    <span class="token annotation punctuation">@ResponseBody</span>
		<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"test_fastjson_RequestBody"</span><span class="token punctuation">)</span>
		<span class="token keyword">public</span> Orders <span class="token function">test_fastjson_RequestBody</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> Orders ord<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"orders :"</span><span class="token operator">+</span>ord<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> ord<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre>
<h3 class="mume-header" id="12springmvc%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8bean%E5%AF%B9%E8%B1%A1%E7%BB%91%E5%AE%9A%E6%96%B9%E6%B3%95%E5%BD%A2%E5%8F%82">12.springmvc可以使用bean对象绑定方法形参：</h3>

<p>  SpringMVC会按请求参数名与bean对象的属性名进行自动匹配,相当与自动填充该bean对象。</p>
<pre class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>entity<span class="token punctuation">;</span>

<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Date<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Orders</span> <span class="token punctuation">{</span>
	<span class="token keyword">private</span> Integer id<span class="token punctuation">;</span>
	<span class="token keyword">private</span> String name<span class="token punctuation">;</span>
	<span class="token keyword">private</span> String birth<span class="token punctuation">;</span>
	
	<span class="token keyword">public</span> <span class="token function">Orders</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
	
    <span class="token comment" spellcheck="true">//省略get/set/toString方法</span>
<span class="token punctuation">}</span>

</pre>
<pre class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>POJO<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
id:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
name:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
birth:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Date<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>birth<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>

</pre>
<pre class="language-java">	<span class="token comment" spellcheck="true">/**
	 * SpringMVC会把请求参数名与bean对象的属性名进行自动匹配,若都匹配的上，会自动填充该bean对象。
	 * @param model
	 * @param ord
	 * @return
	 */</span>
	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"/POJO"</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> ModelAndView <span class="token function">testPOJO</span><span class="token punctuation">(</span>ModelAndView model<span class="token punctuation">,</span>Orders ord<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Orders : "</span><span class="token operator">+</span>ord<span class="token punctuation">)</span><span class="token punctuation">;</span>      
   		model<span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                     <span class="token comment" spellcheck="true">//跳转到hello.jsp页面</span>
		<span class="token keyword">return</span> model<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

</pre>
<h3 class="mume-header" id="13%E8%AF%B7%E6%B1%82%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95%E5%8F%AF%E4%BB%A5%E6%94%AF%E6%8C%81%E5%A4%9A%E7%A7%8D%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%8F%82%E6%95%B0">13.请求处理方法可以支持多种数据类型的参数：</h3>

<p>  <strong>每个请求方法可以有多个不同类型的参数</strong></p>
<pre class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ServletAPI<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>测试请求处理方法可以支持多种数据类型的参数<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
</pre>
<pre class="language-java">	<span class="token comment" spellcheck="true">/**
	 * 请求处理方法可以支持多种数据类型的参数：
	 * HttpServletRequest
	 * HttpServletResponse
	 * HttpSession
	 * Reader
	 * Writer
	 * Map
	 * Model
	 * ModelAndView
	 * .....
	 * ....
	 */</span>
	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"/ServletAPI"</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> ModelAndView <span class="token function">testServletAPI</span><span class="token punctuation">(</span>ModelAndView model<span class="token punctuation">,</span>HttpServletRequest request<span class="token punctuation">,</span>HttpServletResponse response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"HttpServletRequest : "</span><span class="token operator">+</span>request<span class="token operator">+</span><span class="token string">"   HttpServletResponse:"</span><span class="token operator">+</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>      
   		model<span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     
		<span class="token keyword">return</span> model<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
</pre>
<h3 class="mume-header" id="14modelandview%E6%A8%A1%E5%9E%8B%E5%92%8C%E8%A7%86%E5%9B%BE%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-model-modelmap">14.ModelAndView(模型和视图数据类型)&amp; Model &amp; ModelMap：</h3>

<p><font color="red">在springmvc框架中，Controller控制器执行业务逻辑，用于产生模型数据(Model),而视图（View）用于渲染模型数据。</font></p>
<p>index.jsp:</p>
<pre class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>test_Model<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
id:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
name:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
birth:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>date<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>birth<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>
</pre>
<p>HelloController.java:</p>
<pre class="language-java">
这里有两种写法：①：Model或者ModelMap  ②：ModelAndView

①：<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
	<span class="token annotation punctuation">@ModelAttribute</span>                          <span class="token comment" spellcheck="true">//该注解修饰的方法会先于请求处理方法调用。</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span>Model m<span class="token punctuation">,</span>Orders ord<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"before  "</span><span class="token operator">+</span>ord<span class="token punctuation">)</span><span class="token punctuation">;</span>
		m<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"orde"</span><span class="token punctuation">,</span>ord<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//把从表单传来的值，放到model中 ，属性名为"orde" ,值为ord</span>
		
	<span class="token punctuation">}</span>
	
	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"test_Model"</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> String <span class="token function">test_Model</span><span class="token punctuation">(</span>Model m<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		Orders orders <span class="token operator">=</span> <span class="token punctuation">(</span>Orders<span class="token punctuation">)</span> m<span class="token punctuation">.</span><span class="token function">asMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"orde"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">//取出model中的名为orde属性</span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"test_Model  "</span><span class="token operator">+</span>orders<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>



②：<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>	
   	<span class="token annotation punctuation">@ModelAttribute</span>                          <span class="token comment" spellcheck="true">//该注解修饰的方法会先于请求处理方法调用。</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span>ModelAndView mv<span class="token punctuation">,</span>Orders ord<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"before  "</span><span class="token operator">+</span>ord<span class="token punctuation">)</span><span class="token punctuation">;</span>
		mv<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">"orde"</span><span class="token punctuation">,</span> ord<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment" spellcheck="true">//把从表单传来的值，放到ModelAndView中 ，属性名为"orde" ,值为ord</span>
	<span class="token punctuation">}</span>
	
	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"test_Model"</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> ModelAndView <span class="token function">test_Model</span><span class="token punctuation">(</span>ModelAndView mv<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		Orders orders <span class="token operator">=</span> <span class="token punctuation">(</span>Orders<span class="token punctuation">)</span> mv<span class="token punctuation">.</span><span class="token function">getModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"orde"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//取出ModelAndView中model中的名为orde属性</span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"test_Model  "</span><span class="token operator">+</span>orders<span class="token punctuation">)</span><span class="token punctuation">;</span>
		mv<span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                                          <span class="token comment" spellcheck="true">//设置响应的视图名称</span>
		<span class="token keyword">return</span> mv<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>


</pre>
<p>hello.jsp:</p>
<pre class="language-html"><span class="token comment" spellcheck="true">&lt;!--orde 是 model/ModelAndView 中的属性名--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span> id: ${orde.id }<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span> name: ${orde.name }<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span> birth: ${orde.birth }<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>
</pre>
<br>
<h2 class="mume-header" id="springmvc%E7%9A%84%E6%95%B0%E6%8D%AE%E8%BD%AC%E6%8D%A2%E6%A0%BC%E5%BC%8F%E5%8C%96">Springmvc的数据转换，格式化：</h2>

<h3 class="mume-header" id="1-%E4%BD%BF%E7%94%A8converterst%E6%8E%A5%E5%8F%A3%E8%BD%AC%E6%8D%A2%E6%95%B0%E6%8D%AE%E6%94%AF%E6%8C%81%E4%BB%BB%E6%84%8F%E7%B1%BB%E5%9E%8B%E4%B9%8B%E9%97%B4%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2%E4%BE%8B%E5%A6%82string-date">1. 使用Converter&lt;S,T&gt;接口转换数据（支持任意类型之间相互转换，例如：String -&gt; Date）：</h3>

<p><font color="red">JSP页面的表单控件的转换的数据类型为String</font></p>
<pre class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>entity<span class="token punctuation">;</span>

<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Date<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
	<span class="token keyword">private</span> Integer id<span class="token punctuation">;</span>
	<span class="token keyword">private</span> String name<span class="token punctuation">;</span>
	<span class="token keyword">private</span> Date time<span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
	<span class="token comment" spellcheck="true">//省略get/set/toString方法</span>
<span class="token punctuation">}</span>

</pre>
<p>index.jsp:</p>
<pre class="language-html">...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>login<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
id  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
name：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
time：   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Date<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>time<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span> <span class="token comment" spellcheck="true">&lt;!--这里的type="Date"，但传给服务器的信息还是String类型--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>
...
</pre>
<pre class="language-java"><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecondController</span> <span class="token punctuation">{</span>
		<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"/login"</span><span class="token punctuation">)</span>
		<span class="token keyword">public</span> String <span class="token function">login</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span> <span class="token punctuation">{</span>     <span class="token comment" spellcheck="true">// 由于User的time为Date类型，而表单传来的time为String类型，会报错</span>
			System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"User : "</span><span class="token operator">+</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</pre>
<h4>①：编写自定义的数据转换器(实现Converter<S.T>接口)：</S.T></h4>
```java
public class StringDateConverter implements Converter<String,Date>{
	private String datepattern="yyyy-MM-dd";     //日期的模板格式，会把yyyy-MM-dd 这种形式的字符串转换为DATE类型
	public String getDatepattern() {             
		return datepattern;
	}
	public void setDatepattern(String datepattern) {
		this.datepattern = datepattern;
	}
<pre class="language-text">@Override
public Date convert(String date) {
	SimpleDateFormat simpledateformat=new SimpleDateFormat(datepattern);    //&#x628A;yyyy-MM-dd &#x8FD9;&#x79CD;&#x5F62;&#x5F0F;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x8F6C;&#x6362;&#x4E3A;DATE&#x7C7B;&#x578B;
	try {
		return simpledateformat.parse(date);                                
	} catch (ParseException e) {
		System.out.println(&quot;=================&#x65E5;&#x671F;&#x8F6C;&#x6362;&#x5931;&#x8D25;&quot;);
		return null;
	}      
}
</pre>
<p>}</p>
<pre class="language-">

&lt;h4&gt;&#x2461;&#xFF1A;&#x4F7F;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x6570;&#x636E;&#x8F6C;&#x6362;&#x5668;&#x751F;&#x6548;,&#x5728;springmvc_config.xml &#x6DFB;&#x52A0;&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#xFF1A;&lt;/h4&gt;
```xml
    &lt;!-- &#x88C5;&#x914D;&#x81EA;&#x5B9A;&#x4E49;&#x7684;conversionService  --&gt;
    &lt;mvc:annotation-driven conversion-service=&quot;conversionService&quot;/&gt;
	&lt;bean id=&quot;conversionService&quot;
		class=&quot;org.springframework.context.support.ConversionServiceFactoryBean&quot;&gt;
		&lt;property name=&quot;converters&quot;&gt;
			&lt;list&gt;
				&lt;bean class=&quot;com.other.StringDateConverter&quot; /&gt;
			&lt;/list&gt;
		&lt;/property&gt;
	&lt;/bean&gt;
</pre>
<h3 class="mume-header" id="2-%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%8F%AA%E6%94%AF%E6%8C%81string-%E5%85%B6%E4%BB%96%E7%B1%BB%E5%9E%8B%E5%AF%B9%E8%B1%A1%E4%BE%8B%E5%A6%82string-date">2. 数据格式化（只支持String-&gt;其他类型对象，例如：String-&gt; Date）：</h3>

<p><mark>Spring提供两个可以用于格式化数字、日期和时间的注解@NumberFormat和@DateTimeFormat，这两个标签可以用于bean的属性或方法参数上</mark>。</p>
<h4>①：使用注解@NumberFormat和@DateTimeFormat</h4>
```java
public class User {
	@NumberFormat(style=Style.NUMBER,pattern="#,###")  //正常数字类型 ，把String类型—> Integer类型
	private Integer id;
	private String name;
	@DateTimeFormat(pattern="yyyy-MM-dd")   //日期类型，String-> Date
	private Date time;
	public User() {}
<pre class="language-text">//&#x7701;&#x7565;get/set/toString&#x65B9;&#x6CD5;
</pre>
<p>}</p>
<pre class="language-">
&lt;h4&gt;&#x2461;&#xFF1A;&#x88C5;&#x914D;&#x683C;&#x5F0F;&#x5316;&#x8F6C;&#x6362;&#x5668;&lt;/h4&gt;
```xml
    &lt;mvc:annotation-driven/&gt;
</pre>
<h4>
 从表单传过来的String类型数据，会被@NumberFormat和@DateTimeFormat注解进行格式化，然后绑定到bean对象的属性上.
</h4>
<h2 class="mume-header" id="springmvc-%E7%9A%84%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8E%E4%B8%8B%E8%BD%BD">SpringMVC 的文件上传与下载：</h2>

<p><font color="red">例子：上传图片到D盘中，下载D盘的图片。</font></p>
<h3 class="mume-header" id="1%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E5%88%B0d%E7%9B%98%E4%B8%AD">1.文件上传(上传图片到D盘中)：</h3>

<p><font color="red">文件也可以成为某个bean的属性，例如：用户头像image文件</font></p>
<p>①：导入 <mark>commons-fileupload-1.3.3.jar , commons-io-2.6.jar</mark> 到类路径中</p>
<p>②：编写文件上传表单与处理方法<br>
index.jsp:</p>
<pre class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>upload<span class="token punctuation">"</span></span> <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>multipart/form-data<span class="token punctuation">"</span></span>   <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
文件描述信息：
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>file_message<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
请选择文件：
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>上传<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>

</pre>
<pre class="language-java"><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecondController</span> <span class="token punctuation">{</span>
	
		<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/upload"</span><span class="token punctuation">)</span>
	    <span class="token keyword">public</span> String <span class="token function">updateThumb</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">"file_message"</span><span class="token punctuation">)</span> String name<span class="token punctuation">,</span>
	            <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">"file"</span><span class="token punctuation">)</span> MultipartFile file<span class="token punctuation">)</span>
	            <span class="token keyword">throws</span> IllegalStateException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>
	        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                   <span class="token comment" spellcheck="true">//判断文件是否为空</span>
	            file<span class="token punctuation">.</span><span class="token function">transferTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"d:/"</span>       <span class="token comment" spellcheck="true">//把文件保存在指定路径，文件名为表单传过来的文件信息</span>
	                    <span class="token operator">+</span> name
	                    <span class="token operator">+</span> file<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>
	                            file<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	        	<span class="token keyword">return</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>
	        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
	        	<span class="token keyword">return</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>
	        <span class="token punctuation">}</span>
	    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre>
<p>③：开启spring的文件上传功能(在springmvc_config.xml增加如下代码)：</p>
<pre class="language-xml"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>multipartResolver<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>org.springframework.web.multipart.commons.CommonsMultipartResolver<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>defaultEncoding<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>   <span class="token comment" spellcheck="true">&lt;!-- 请求的编码方式，必须与jsp的编码方式一致 --></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>maxUploadSize<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>5242880<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>   <span class="token comment" spellcheck="true">&lt;!-- 上传文件大小上限，单位为字节 --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>
</pre>
<h3 class="mume-header" id="2%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E4%B8%8B%E8%BD%BDd%E7%9B%98%E7%9A%84%E5%9B%BE%E7%89%87">2.文件下载(下载D盘的图片)：</h3>

<p>文件下载比较简单，直接在页面给出了一个超链接，该链接href的属性等于要下载文件的文件名，就可以实现文件下载了。<br>
SpringMVC提供了一个ResponseEntity类型，使用它可以很方便地定义返回的HttpHeaders和HttpStatus。</p>
<pre class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>download<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
name:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>下载<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>
</pre>
<pre class="language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"/download"</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> ResponseEntity<span class="token operator">&lt;</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span> <span class="token function">download</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span>
			<span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span> String name<span class="token punctuation">,</span>
			Model model<span class="token punctuation">)</span><span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>
	<span class="token comment" spellcheck="true">//下载文件路径</span>
	String path <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token string">"D:/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	File file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"D:/"</span> <span class="token operator">+</span> File<span class="token punctuation">.</span>separator <span class="token operator">+</span> name <span class="token operator">+</span><span class="token string">".jpg"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	HttpHeaders headers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
	<span class="token comment" spellcheck="true">//下载显示的文件名，解决中文名称乱码问题  </span>
	String downloadFielName <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"iso-8859-1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment" spellcheck="true">//通知浏览器以attachment（下载方式）打开图片</span>
	headers<span class="token punctuation">.</span><span class="token function">setContentDispositionFormData</span><span class="token punctuation">(</span><span class="token string">"attachment"</span><span class="token punctuation">,</span> downloadFielName<span class="token punctuation">)</span><span class="token punctuation">;</span> 
	<span class="token comment" spellcheck="true">//application/octet-stream ： 二进制流数据（最常见的文件下载）。</span>
	headers<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span>MediaType<span class="token punctuation">.</span>APPLICATION_OCTET_STREAM<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token operator">&lt;</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">(</span>FileUtils<span class="token punctuation">.</span><span class="token function">readFileToByteArray</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">,</span>    
			headers<span class="token punctuation">,</span> HttpStatus<span class="token punctuation">.</span>CREATED<span class="token punctuation">)</span><span class="token punctuation">;</span>  
	<span class="token punctuation">}</span>
</pre>
<h2 class="mume-header" id="springmvc-%E6%8B%A6%E6%88%AA%E5%99%A8">SpringMVC 拦截器:</h2>

<p>它的主要作用是拦截用户的请求并进行相应的处理。比如通过它来进行<mark>权限验证，或者是来判断用户是否登陆</mark>，或者是像12306 那样子判断当前时间是否是购票时间。</p>
<p><font color="red">SpringMVC 中的Interceptor 拦截请求是通过HandlerInterceptor接口来实现的。</font></p>
<p><strong>例子：输入admin，才能登录，否则一直跳转登录页面：</strong></p>
<pre class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>login<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
name:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>
</pre>
<pre class="language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"/login"</span><span class="token punctuation">)</span>
		<span class="token keyword">public</span> String <span class="token function">login</span><span class="token punctuation">(</span>User user<span class="token punctuation">,</span>HttpSession session<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"这是 login 的请求处理方法"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
			session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment" spellcheck="true">//把user加入到session中</span>
			<span class="token keyword">return</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre>
<p><strong>①：编写拦截器，实现HandlerInterceptor接口：</strong></p>
<pre class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringMVCInterceptor</span> <span class="token keyword">implements</span> <span class="token class-name">HandlerInterceptor</span><span class="token punctuation">{</span>

   <span class="token comment" spellcheck="true">/** 
     * preHandle方法是进行处理器拦截用的，顾名思义，该方法将在Controller处理之前进行调用.
     * 
     * SpringMVC中的Interceptor拦截器是链式的，可以同时存在 多个Interceptor，
     * 然后SpringMVC会根据声明的前后顺序一个接一个的执行，而且所有的Interceptor中的preHandle方法都会在 Controller方法调用之前调用。
     * 
     * SpringMVC的这种Interceptor链式结构也是可以进行中断的，这种中断方式是令preHandle的返 
     * 回值为false，当preHandle的返回值为false的时候整个请求就结束了。 
     */</span>  
    <span class="token annotation punctuation">@Override</span>  
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">preHandle</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span>  
            HttpServletResponse response<span class="token punctuation">,</span> Object handler<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>  
    	System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"拦截器的  preHandle  ----->  "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//    	return true;           //当返回之为true ，表示这里的拦截放行， 为false表示已经拦截</span>
    	
    	String name <span class="token operator">=</span>request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>name<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"name: "</span><span class="token operator">+</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">" name 值 不为 admin，重新回到index.jsp  ----->  "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    		request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"index.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    	<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
    		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"name: "</span><span class="token operator">+</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">" name 值为 admin，成功登录  ----->  "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    		<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    	<span class="token punctuation">}</span>
    	
    	
    <span class="token punctuation">}</span>  
      
    <span class="token comment" spellcheck="true">/** 
     * 这个方法只会在当前这个Interceptor的preHandle方法返回值为true的时候才会执行。
     * 
     * postHandle是进行处理器拦截用的，它的执行时间是在处理器进行处理之后，也就是在Controller的方法调用之后执行，
     * 但是它会在DispatcherServlet进行视图的渲染之前执行，也就是说在这个方法中你可以对ModelAndView进行操 
     * 作。
     * 
     * 这个方法的链式结构跟正常访问的方向是相反的，也就是说先声明的Interceptor拦截器该方法反而会后调用，
     * 
     */</span>  
    <span class="token annotation punctuation">@Override</span>  
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">postHandle</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span>  
            HttpServletResponse response<span class="token punctuation">,</span> Object handler<span class="token punctuation">,</span>  
            ModelAndView modelAndView<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>  
       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"拦截器的   postHandle   -------------->"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          
    <span class="token punctuation">}</span>  
  
    <span class="token comment" spellcheck="true">/** 
     * 该方法也是需要当前对应的Interceptor的preHandle方法的返回值为true时才会执行。该方法将在整个请求完成之后，也就是DispatcherServlet渲染了视图执行， 
     * 这个方法的主要作用是用于清理资源的，当然这个方法也只能在当前这个Interceptor的preHandle方法的返回值为true时才会执行。 
     */</span>  
    <span class="token annotation punctuation">@Override</span>  
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterCompletion</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span>  
            HttpServletResponse response<span class="token punctuation">,</span> Object handler<span class="token punctuation">,</span> Exception ex<span class="token punctuation">)</span>  
    <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>  
       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"拦截器的   afterCompletion ----------->"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          
    <span class="token punctuation">}</span>  

<span class="token punctuation">}</span>
</pre>
<p><strong>②：在springmvc上下文中配置拦截器：</strong><br>
springmvc——config.xml:</p>
<pre class="language-xml">  <span class="token comment" spellcheck="true">&lt;!-- 自定义拦截链配置 --></span>  
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>interceptors</span><span class="token punctuation">></span></span>  
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>interceptor</span><span class="token punctuation">></span></span>  
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>mapping</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/*<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment" spellcheck="true">&lt;!-- 拦截所有请求 --></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.other.SpringMVCInterceptor<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>  
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>interceptor</span><span class="token punctuation">></span></span>  
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>interceptors</span><span class="token punctuation">></span></span>  
    
</pre>
<p><img src="../img/springmvc_img/6.png" alt="6.png"></p>
<h2 class="mume-header" id="rest%E9%A3%8E%E6%A0%BC%E5%85%A8%E7%A7%B0resource-representational-state-transfer%E8%B5%84%E6%BA%90%E8%A1%A8%E7%8E%B0%E5%B1%82%E7%8A%B6%E6%80%81%E4%BC%A0%E9%80%92">Rest风格（全称：Resource Representational State Transfer，资源表现层状态传递）：</h2>

<p>Resource（资源）： 网络上的任何一种实体都可以称作资源。<font color="red">URL 为每一个资源给定了标识符。</font></p>
<p>Representational（表现层）：<font color="red"> 把资源呈现出来的形式，叫做该资源的表现层</font>。例如：文本可以用txt,html,json格式表现出来。</p>
<p>State Transfer(状态转化) ： <font color="red">Http协议中，GET用来获取资源，POST用来新建资源，Delete用来删除资源，Put 用来更新资源</font></p>
</String,Date>
      </div>
      <div class="md-sidebar-toc"><ul>
<li><a href="#springmvc">SpringMVC</a>
<ul>
<li><a href="#%E6%A6%82%E8%BF%B0">概述：</a></li>
<li><a href="#dispatcherservlet%E4%BB%8B%E7%BB%8D">DispatcherServlet介绍:</a></li>
<li><a href="#%E7%AC%AC%E4%B8%80%E4%B8%AAspringmvc">第一个springmvc：</a></li>
<li><a href="#%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3%E8%AF%B7%E6%B1%82%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95%E7%9A%84%E5%8F%82%E6%95%B0%E7%B1%BB%E5%9E%8B">常用注解&amp;请求处理方法的参数类型：</a>
<ul>
<li><a href="#1controller%E6%B3%A8%E8%A7%A3">1.@Controller注解：</a></li>
<li><a href="#2requestmapping%E6%B3%A8%E8%A7%A3%E4%B8%BA%E6%8E%A7%E5%88%B6%E5%99%A8%E7%B1%BB%E6%8C%87%E5%AE%9A%E5%8F%AF%E4%BB%A5%E5%A4%84%E7%90%86%E9%82%A3%E4%BA%9Burl%E8%AF%B7%E6%B1%82">2.@RequestMapping注解(为控制器类指定可以处理那些URL请求)：</a></li>
<li><a href="#3pathvariable%E6%B3%A8%E8%A7%A3">3.@PathVariable注解：</a></li>
<li><a href="#4requestparam%E6%B3%A8%E8%A7%A3">4.@RequestParam注解</a></li>
<li><a href="#5requestheader%E6%B3%A8%E8%A7%A3">5.@RequestHeader注解：</a></li>
<li><a href="#6cookievalue%E6%B3%A8%E8%A7%A3">6.@CookieValue注解：</a></li>
<li><a href="#7sessionattributes%E6%B3%A8%E8%A7%A3">7.@SessionAttributes注解：</a></li>
<li><a href="#8modelattribute%E6%B3%A8%E8%A7%A3">8.@ModelAttribute注解：</a>
<ul>
<li><a href="#1%E7%94%A8%E6%B3%95%E4%B8%80modelattribute%E6%B3%A8%E8%A7%A3%E6%9C%89value%E5%B1%9E%E6%80%A7%E5%80%BC">1.用法一：@ModelAttribute注解有value属性值</a></li>
<li><a href="#2%E7%94%A8%E6%B3%95%E4%BA%8Cmodelattribute%E6%B3%A8%E8%A7%A3%E6%B2%A1%E6%9C%89value%E5%B1%9E%E6%80%A7%E5%80%BC">2.用法二：@ModelAttribute注解没有value属性值</a></li>
<li><a href="#3%E7%94%A8%E6%B3%95%E4%B8%89modelattribute-%E4%B8%8E-requestmapping%E5%90%8C%E6%97%B6%E6%B3%A8%E9%87%8A%E4%B8%80%E4%B8%AA%E6%96%B9%E6%B3%95">3.用法三：@ModelAttribute 与 @RequestMapping同时注释一个方法</a></li>
<li><a href="#4%E7%94%A8%E6%B3%95%E5%9B%9Bmodelattribute%E6%A0%87%E8%AE%B0%E4%B8%80%E4%B8%AA%E6%96%B9%E6%B3%95%E7%9A%84%E5%8F%82%E6%95%B0">4.用法四：@ModelAttribute标记一个方法的参数</a></li>
</ul>
</li>
<li><a href="#9httpmessagecovertert-%E6%8E%A5%E5%8F%A3">9.HttpMessageCoverter<T> 接口(★★★)：</T></a></li>
<li><a href="#10requestbody%E6%B3%A8%E8%A7%A3%E4%B8%BB%E8%A6%81%E7%94%A8%E4%BA%8E%E5%A4%84%E7%90%86json%E6%A0%BC%E5%BC%8F%E6%95%B0%E6%8D%AE%E5%B9%B6%E8%BD%AC%E6%8D%A2%E4%B8%BA%E5%AF%B9%E5%BA%94%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">10.@RequestBody注解(主要用于处理json格式数据，并转换为对应的数据类型)：</a></li>
<li><a href="#11%E8%87%AA%E5%AE%9A%E4%B9%89httpmessagecoverter%E6%8E%A5%E5%8F%97json%E6%A0%BC%E5%BC%8F%E7%9A%84%E6%95%B0%E6%8D%AE%E8%BF%99%E9%87%8C%E4%B9%9F%E9%9C%80%E8%A6%81%E5%9C%A8webxml%E4%B8%AD%E6%94%BE%E8%A1%8Cjs%E6%96%87%E4%BB%B6">11.自定义HttpMessageCoverter接受JSON格式的数据(这里也需要在web.xml中放行js文件)：</a></li>
<li><a href="#12springmvc%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8bean%E5%AF%B9%E8%B1%A1%E7%BB%91%E5%AE%9A%E6%96%B9%E6%B3%95%E5%BD%A2%E5%8F%82">12.springmvc可以使用bean对象绑定方法形参：</a></li>
<li><a href="#13%E8%AF%B7%E6%B1%82%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95%E5%8F%AF%E4%BB%A5%E6%94%AF%E6%8C%81%E5%A4%9A%E7%A7%8D%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%8F%82%E6%95%B0">13.请求处理方法可以支持多种数据类型的参数：</a></li>
<li><a href="#14modelandview%E6%A8%A1%E5%9E%8B%E5%92%8C%E8%A7%86%E5%9B%BE%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-model-modelmap">14.ModelAndView(模型和视图数据类型)&amp; Model &amp; ModelMap：</a></li>
</ul>
</li>
<li><a href="#springmvc%E7%9A%84%E6%95%B0%E6%8D%AE%E8%BD%AC%E6%8D%A2%E6%A0%BC%E5%BC%8F%E5%8C%96">Springmvc的数据转换，格式化：</a>
<ul>
<li><a href="#1-%E4%BD%BF%E7%94%A8converterst%E6%8E%A5%E5%8F%A3%E8%BD%AC%E6%8D%A2%E6%95%B0%E6%8D%AE%E6%94%AF%E6%8C%81%E4%BB%BB%E6%84%8F%E7%B1%BB%E5%9E%8B%E4%B9%8B%E9%97%B4%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2%E4%BE%8B%E5%A6%82string-date">1. 使用Converter&lt;S,T&gt;接口转换数据（支持任意类型之间相互转换，例如：String -&gt; Date）：</a></li>
<li><a href="#2-%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%8F%AA%E6%94%AF%E6%8C%81string-%E5%85%B6%E4%BB%96%E7%B1%BB%E5%9E%8B%E5%AF%B9%E8%B1%A1%E4%BE%8B%E5%A6%82string-date">2. 数据格式化（只支持String-&gt;其他类型对象，例如：String-&gt; Date）：</a></li>
</ul>
</li>
<li><a href="#springmvc-%E7%9A%84%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8E%E4%B8%8B%E8%BD%BD">SpringMVC 的文件上传与下载：</a>
<ul>
<li><a href="#1%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E5%88%B0d%E7%9B%98%E4%B8%AD">1.文件上传(上传图片到D盘中)：</a></li>
<li><a href="#2%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E4%B8%8B%E8%BD%BDd%E7%9B%98%E7%9A%84%E5%9B%BE%E7%89%87">2.文件下载(下载D盘的图片)：</a></li>
</ul>
</li>
<li><a href="#springmvc-%E6%8B%A6%E6%88%AA%E5%99%A8">SpringMVC 拦截器:</a></li>
<li><a href="#rest%E9%A3%8E%E6%A0%BC%E5%85%A8%E7%A7%B0resource-representational-state-transfer%E8%B5%84%E6%BA%90%E8%A1%A8%E7%8E%B0%E5%B1%82%E7%8A%B6%E6%80%81%E4%BC%A0%E9%80%92">Rest风格（全称：Resource Representational State Transfer，资源表现层状态传递）：</a></li>
</ul>
</li>
</ul>
</div>
      <a id="sidebar-toc-btn">≡</a>
    </body>
    
    
    
    
    
    <script>
(function bindTaskListEvent() {
  var taskListItemCheckboxes = document.body.getElementsByClassName('task-list-item-checkbox')
  for (var i = 0; i < taskListItemCheckboxes.length; i++) {
    var checkbox = taskListItemCheckboxes[i]
    var li = checkbox.parentElement
    if (li.tagName !== 'LI') li = li.parentElement
    if (li.tagName === 'LI') {
      li.classList.add('task-list-item')
    }
  }
}())    
</script>
    
<script>

var sidebarTOCBtn = document.getElementById('sidebar-toc-btn')
sidebarTOCBtn.addEventListener('click', function(event) {
  event.stopPropagation()
  if (document.body.hasAttribute('html-show-sidebar-toc')) {
    document.body.removeAttribute('html-show-sidebar-toc')
  } else {
    document.body.setAttribute('html-show-sidebar-toc', true)
  }
})
</script>
      
  </html>